<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BurgerKiss – POS (Variante B: gespiegelt auf SN1)</title>
  <link rel="stylesheet" href="https://burgerkiss25.github.io/burgerkiss-pos/style.css?v=11" />

  <!-- ====================== POS-Konfiguration ====================== -->
  <script>
    // Preise lokal editierbar lassen
    window.BK_ALLOW_PRICE_EDIT = true;

    // Live-Sync aktivieren
    window.BK_SYNC_ENABLED = true;

    // Variante B: ALLE Geräte arbeiten auf demselben Slot.
    // Hier fix auf SN1 “gepinnt”.
    window.BK_SYNC_FORCE_SLOT = 'SN1';

    // Datenbank-Pfad für Live-Sync (unter deiner Realtime DB)
    window.BK_SYNC_PATH = '/pos/live';

    // Firebase Web SDK Konfiguration (dein Projekt)
    window.FIREBASE_CONFIG = {
      apiKey: "AIzaSyD1LNc1SPciD6k5GYbzimLqs0XZRf54DUs",
      authDomain: "burgerkiss-pos.firebaseapp.com",
      projectId: "burgerkiss-pos",
      storageBucket: "burgerkiss-pos.firebasestorage.app",
      messagingSenderId: "1041476532885",
      appId: "1:1041476532885:web:3a20041480487fb60c399c"
    };
  </script>
  <!-- =============================================================== -->
</head>
<body>
  <!-- Sticky HUD -->
  <div class="hud-wrap">
    <header>
      <div class="totals">
        <h1 id="grand">0 GHS</h1>
        <div class="stats">
          <span class="pill" id="combosPill">Combos: 0</span>
          <span class="pill" id="discountTag">No discount</span>
        </div>
      </div>
      <div class="tabbar">
        <button id="tabOrder" class="active">Order</button>
        <button id="tabMake">Make</button>
        <button id="tabPay">Pay</button>
        <button class="x" id="btnSummary">Summary</button>
        <button class="x" id="btnReceipt">Receipt</button>
        <button class="x" id="btnPrices">Edit Prices</button>
        <button class="x" id="btnGroup">Group Ticket</button>
      </div>
    </header>

    <div class="hud-rows">
      <div class="toolbar">
        <button class="ghost" id="btnUndo">Undo</button>
        <button class="danger" id="btnReset">Reset</button>
        <button class="disc" data-disc="0.01">-1%</button>
        <button class="disc" data-disc="0.03">-3%</button>
        <button class="disc" data-disc="0.05">-5%</button>
        <button class="disc" data-disc="0.10">-10%</button>
        <button class="ok" id="btnClearDisc">Clear Discount</button>
        <button class="ghost" id="btnClearStorage">Clear Storage</button>
      </div>

      <div class="toolbar" id="slotsBar">
        <!-- Slot-Verwaltung: Trotz voreingestelltem SN1 lassen sich Slots hinzufügen, umbenennen und löschen -->
        <span class="chip" id="btnAddSlot">+ Slot</span>
        <span class="chip" id="btnRenameSlot">Rename</span>
        <span class="chip" id="btnDeleteSlot">Delete</span>
        <span class="chip" id="activeSlotLabel">SN1</span>
      </div>
    </div>
  </div>

  <!-- Kategorien -->
  <div class="catbar">
    <button class="tab active" data-cat="all">All</button>
    <button class="tab" data-cat="burger">Burgers</button>
    <button class="tab" data-cat="wings">Wings</button>
    <button class="tab" data-cat="fries">Fries</button>
    <button class="tab" data-cat="extra">Extras</button>
    <button class="tab" data-cat="drink">Drinks</button>
  </div>

  <!-- Hauptbereich -->
  <div class="wrap">
    <!-- ORDER -->
    <section id="tab-order">
      <div class="grid" id="buttons"></div>

      <div class="note-box">
        <input id="noteInput" placeholder="Note for NEXT item (e.g. 'no onion')" />
        <div class="quick">
          <span class="chip quick-note">No onion</span>
          <span class="chip quick-note">Extra onion</span>
          <span class="chip quick-note">No lettuce</span>
          <span class="chip quick-note">Extra spicy</span>
        </div>
      </div>

      <div class="panel">
        <h3>Current items (active slot)</h3>
        <div class="rows" id="lines"></div>
        <div class="sumline"><span>Subtotal</span><b id="subtotal">0 GHS</b></div>
        <div class="sumline"><span>Discount</span><b id="discount">0 GHS</b></div>
        <div class="sumline"><span>Total</span><b id="total">0 GHS</b></div>
      </div>
    </section>

    <!-- MAKE -->
    <section id="tab-make" class="hidden">
      <div id="makeList" class="panel">
        <h3>Preparation – mark items as done</h3>
      </div>
    </section>

    <!-- PAY -->
    <section id="tab-pay" class="hidden">
      <div id="payList" class="panel">
        <h3>Payment status</h3>
      </div>
      <div class="panel" style="margin-top:10px">
        <div class="sumline"><span>All Slots Subtotal</span><b id="allSubtotal">0 GHS</b></div>
        <div class="sumline"><span>Global Discount</span><b id="allDiscount">0 GHS</b></div>
        <div class="sumline"><span>Grand Total</span><b id="allGrand">0 GHS</b></div>
      </div>
    </section>

    <!-- PRINT AREA -->
    <section id="printArea" class="hidden"></section>
  </div>

  <!-- SUMMARY MODAL -->
  <div class="modal" id="modalSummary">
    <div class="sheet">
      <header>
        <b id="sumTitle">Summary – SN1</b>
        <div><button class="x" id="sumClose">Close</button></div>
      </header>
      <div class="body" id="sumBody"></div>
    </div>
  </div>

  <!-- RECEIPT MODAL -->
  <div class="modal" id="modalReceipt">
    <div class="sheet">
      <header>
        <b>Receipt</b>
        <div>
          <button class="x" id="rCopy">Copy</button>
          <button class="x" id="rWA">WhatsApp</button>
          <button class="x" id="rPrint">Print</button>
          <button class="x" id="rClose">Close</button>
        </div>
      </header>
      <div class="body" id="receiptBody"></div>
    </div>
  </div>

  <!-- PRICES MODAL -->
  <div class="modal" id="modalPrices">
    <div class="sheet">
      <header>
        <b>Edit Prices</b>
        <div>
          <button class="x" id="pSave">Save</button>
          <button class="x" id="pReset">Reset</button>
          <button class="x" id="pClose">Close</button>
        </div>
      </header>
      <div class="body" id="pricesBody"></div>
    </div>
  </div>

  <!-- GROUP MODAL -->
  <div class="modal" id="modalGroup">
    <div class="sheet">
      <header>
        <b>Group Ticket</b>
        <div>
          <button class="x" id="gMake">Create Receipt</button>
          <button class="x" id="gPaid">Mark Paid</button>
          <button class="x" id="gClose">Close</button>
        </div>
      </header>
      <div class="body" id="groupBody"></div>
    </div>
  </div>

  <!-- ====================== App-Skripte ====================== -->
  <script src="https://burgerkiss25.github.io/burgerkiss-pos/data.js?v=11"></script>
  <script src="https://burgerkiss25.github.io/burgerkiss-pos/prices.js?v=11"></script>
  <script src="https://burgerkiss25.github.io/burgerkiss-pos/state.js?v=11"></script>
  <script src="https://burgerkiss25.github.io/burgerkiss-pos/logic.js?v=11"></script>
  <script src="https://burgerkiss25.github.io/burgerkiss-pos/ui.js?v=11"></script>
  <script src="https://burgerkiss25.github.io/burgerkiss-pos/main.js?v=11"></script>

  <!-- =================== Firebase SDK (Compat) =================== -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <!-- =============== Live-Sync (Variante B, Polling) =============== -->
  <script src="https://burgerkiss25.github.io/burgerkiss-pos/sync_poll.js?v=11"></script>
</body>
</html>
